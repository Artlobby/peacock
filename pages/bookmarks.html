<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Bookmarks</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

    <style id="global">
      *  { font-family: Roboto; user-select: none; }
      body { width: 100%; height: 100%; margin: 0px; position: absolute; }
      main { width: 50%; margin: 0 auto; margin-top: 100px; }

      li {
        display: flex;
        align-items: center;

        list-style: none;
        padding: 00px 20px;
      }

      li img {
        width: 20px; height: 20px;
      }

      li p {
        margin-left: 15px;
      }

      li svg {
        position: absolute;
        right: 10px;
      }

      ul {
        padding: 5px 0px;
        border-radius: 5px;
        border: 1px solid;
        position: relative;
      }

      .selected { background: #8AB4F8; }
      .selected p { color: black; }
      .selected svg path { color: black; }
    </style>

    <!-- Dark -->
    <style id="not-light">
      *    { color: white; }
      body { background: #242424; }
      ul   { border-color: rgba(255,255,255,0.2); }
    </style>

    <!-- Light -->
    <style id="not-dark">
      *    { color: black; }
      body { background: white; }
      ul   { border-color: rgba(0,0,0,0.2); }
    </style>
  </head>
  <body>
    <main>
      <h1>Bookmarks</h1>
      <ul id="list"></ul>
    </main>
  </body>
  <script>
    let theme = sendSync('getTheme');
    let bookmarks = sendSync('getBookmarks');
    let list = document.getElementById('list');

    document.getElementById('not-' + theme).remove();

    bookmarks.forEach((bookmark, i) => {
      let item = document.createElement('li');
      item.setAttribute('data-url', bookmark.url);
      item.id = bookmark.id;

      let text = document.createElement('p');
      text.innerHTML = bookmark.title;

      let icon = document.createElement('img');
      icon.src = `https://www.google.com/s2/favicons?domain=${bookmark.url}`;

      item.appendChild(icon);
      item.appendChild(text);

      item.innerHTML += `<svg style="width:24px;height:24px" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z" />
        </svg>`;

      list.appendChild(item);

      item.onclick = e => {
        e.stopPropagation();
        if(e.target.tagName == 'path' || e.target.tagName == 'svg') {
          let selected = document.getElementsByClassName('selected')[0];
          if(selected) { selected.classList.remove('selected'); }

          item.classList.add('selected');
          alert('Sorry I didn\'t add bookmark management yet... ðŸ˜¬');
        } else {
          if(item.classList.contains('selected')) {
            location.href = bookmark.url;
          } else {
            let selected = document.getElementsByClassName('selected')[0];
            if(selected) { selected.classList.remove('selected'); }

            item.classList.add('selected');
          }
        }
      };
    });

    document.body.onclick = e => {
      let selected = document.getElementsByClassName('selected')[0];
      if(selected) { selected.classList.remove('selected'); }
    };
  </script>
</html>
